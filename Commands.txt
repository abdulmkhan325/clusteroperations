
Commands Used   

-- In order to run the cluster setup playbook
ansible-playbook ./ansible/rosa-cluster-create-operations.yml --extra-vars "cluster_name=rosa4v5 credentials_file=/Users/Sunny/Documents/Projects/clusteroperations/ansible/roles/createcluster/scripts/.credentials"

-- To view cluster installation logs
rosa logs install -c rosa4v5 --watch 

-- Delete the cluster using its name 
ansible-playbook ./ansible/rosa-cluster-delete-operations.yml --extra-vars "cluster_name=rosa4v4"

-- Describe Cluster by name 
rosa describe cluster --cluster=<cluster_name> 

-- Delete Cluster by name
rosa delete cluster --cluster=<cluster_name> --watch --yes 
rosa delete cluster --cluster=rosa4v5 --watch --yes    

"docker-build": "docker build -t $(dockerUsername)/react-todo-app:$(tagName) .",
"docker-run": "docker run --rm -p 3000:3000 -v $(pwd):/app $(dockerUsername)/react-todo-app:$(tagName)"


./createcluster2.sh "rosa4v5" "/Users/Sunny/Documents/Projects/clusteroperations/ansible/roles/createcluster/scripts/.credentials"

./createcluster2.sh "rosa4v5" "pass"


ansible-playbook rosa-cluster-create-operations.yml --extra-vars "cluster_name=rosa4v5 token=/Users/Sunny/Documents/Projects/clusteroperations/ansible/roles/createcluster/scripts/.credentials"

ansible-playbook rosa-cluster-create-operations.yml --extra-vars "cluster_name=rosa4v5 token=pass"



sudo yum install ansible 
wget https://mirror.openshift.com/pub/openshift-v4/clients/rosa/latest/rosa-linux.tar.gz
                    tar xvf rosa-linux.tar.gz
                    pwd
                    ls
                    sudo mv rosa /usr/local/bin/rosa
                    rosa version


        // Create AWS Cluster
        stage('Create AWS ROSA Cluster') {
            steps {
                catchError(buildResult: 'UNSTABLE', stageResult: 'FAILURE'){
                    sh "ansible-playbook ansible/rosa-cluster-create-operations.yml -e 'cluster_name=${clusterName}' -e token='${ROSA_TOKEN}'"
                }
            }
        }
        // Delete AWS Cluster
        stage('Delete AWS Rosa Cluster') {
            steps {
                catchError(buildResult: 'UNSTABLE', stageResult: 'FAILURE'){
                    sh "ansible-playbook ansible/rosa-cluster-delete-operations.yml -e 'cluster_name=${clusterName}'"
                }
            }
        }
        // Rosa Login
        stage('ROSA Install and Login') {
            steps { 
                sh """
                    wget https://mirror.openshift.com/pub/openshift-v4/clients/rosa/latest/rosa-linux.tar.gz
                    tar xvf rosa-linux.tar.gz 
                    sudo -S mv rosa /usr/local/bin/rosa
                    rosa version
                    rosa login -t '${ROSA_TOKEN}'
                    """.stripIndent()    
            }
        } 